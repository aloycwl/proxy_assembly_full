<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-32" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.8.2/web3.min.js"></script>
    <script src="library.js" defer></script>
  </head>
  <body>
    <img id="img" />
    <img
    src=https://cloudflare-ipfs.com/ipfs/QmRfgJQGWQYTSbcbhc929E6mvdQatNntGAyJSvawTc4Yjp>
  </body>
  <script defer>
    API = {
      'Content-Type': 'application/json',
      'x-api-key': 'f1384f0e-abd1-4d69-bb64-4682beb7fde4',
    };
    async function load() {
      id = 'QmRfgJQGWQYTSbcbhc929E6mvdQatNntGAyJSvawTc4Yjp';
      resp = await fetch(`https://api.tatum.io/v3/ipfs/${id}`, {
        method: 'GET',
        headers: API,
      });

      data = await resp.text();
      data2 = btoa(unescape(encodeURIComponent(data)));
      //$('#img').attr('src', 'data:image/webp;base64,' + data2);
      console.log(data2);

      myblob = new Blob([data], {
        type: 'image/webp',
      });
      $('#img').attr('src', myblob);

      var reader = new FileReader();
      reader.readAsDataURL(myblob);
      reader.onloadend = function () {
        //$('#img').attr('src', reader.result);
      };
    }
    load();
  </script>
</html>
