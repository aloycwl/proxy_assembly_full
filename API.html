<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="library.js" defer></script>
  </head>
  <body>
    <input
      id="txtKey"
      size="70"
      value="d6e9d2691625bee5e31947d737169209b5dd9a3538b2768e9507d5f9e6eb0660"
    /><br /><br />
    <button id="btnBSC">Check All</button><br />
    BSC: <a id="lblBSC"></a><br />
    WDT: <a id="lblWD"></a><br />
    Total WDT: <a id="lblPool"></a><br />
    Score: <a id="txtCheckScore"></a> <br /><br />
    <button id="btnScore">Upload game score</button>
    <input
      id="txtScore"
      type="number"
      placeholder="Enter score 输入积分"
    /><br />
    <button id="btnWithdraw">Withdraw</button>
    <input id="txtWithdraw" type="number" placeholder="Enter amount 输入数量" />
  </body>
  <script>
    //Display all the onchain information
    //显示所有链上信息
    $('#btnBSC').on('click', async function (event) {
      await walletKey('', $('#txtKey').val());
      $('#lblBSC').html(await balanceBSC(ADDR));
      $('#lblWD').html(await balanceWDT(ADDR));
      $('#lblPool').html(
        await balanceWDT('0xd511e66bcb935302662f49211e0281a5878a4f92')
      );
      $('#txtCheckScore').html(await getScore(ADDR));
    });

    //Call write to chain functions
    //调用写入链函数
    $('#btnScore').on('click', async function (event) {
      _score = await updateScore($('#txtScore').val(), $('#txtKey').val());
      $('#btnScore').html(_score.hasOwnProperty('txId') ? 'Success' : 'Error');
    });

    $('#btnWithdraw').on('click', async function (event) {
      _out = await withdrawal($('#txtWithdraw').val(), $('#txtKey').val());
      $('#btnWithdraw').html(_out.hasOwnProperty('txId') ? 'Success' : 'Error');
    });
  </script>
</html>
