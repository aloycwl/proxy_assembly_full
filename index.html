<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="library.js" defer></script>
  </head>
  <body>
    <h3>Testing page 测试页</h3>
    <button id="btnGenerate">Create new wallet 造钱包</button><br />
    <a id="lblMnemonic"></a><br /><br />
    <button id="btnRandom">I have noted down 记下了</button>
    <button id="btnCont">Continue 继续</button><br />
    <div id="lblRandom"></div>
    <div id="lblCorrect"></div>
    <h1 id="lblSequence"></h1>
    Address 地址: <a id="lblAddress"></a><br /><br />
    Private Key 密钥: <a id="lblKey"></a><br /><br />
    <textarea id="txtImport"></textarea> <button id="btnImport">Import</button>
    <br /><a id="lblImport"></a><br /><br />
    <input
      id="txtKey"
      size="70"
      value="d6e9d2691625bee5e31947d737169209b5dd9a3538b2768e9507d5f9e6eb0660"
    /><br /><br />
    <button id="btnBSC">Check All</button><br />
    BSC (不需要，观察罢了): <a id="lblBSC"></a><br />
    WDT: <a id="lblWD"></a><br />
    Total WDT (不需要，观察罢了): <a id="lblPool"></a><br />
    Score: <a id="txtCheckScore"></a> <br /><br />
    <button id="btnScore">Upload game score</button>
    <input
      id="txtScore"
      type="number"
      placeholder="Enter score 输入积分"
    /><br />
    <button id="btnWithdraw">Withdraw</button>
    <input id="txtWithdraw" type="number" placeholder="Enter amount 输入数量" />
  </body>
  <script defer>
    $(`#btnGenerate`).on(`click`, async function (event) {
      await walletGenerate();
      await walletKey(MNEMONIC);
      $(`#lblMnemonic`).html(MNEMONIC);
      $(`#lblKey`).html(KEY);
      $(`#lblAddress`).html(ADDR);
    });

    $(`#btnRandom`).on(`click`, function (event) {
      genRanBtns(`#lblRandom`, `#lblCorrect`, `#btnCont`);
    });

    $(`#btnImport`).on(`click`, async function (event) {
      await walletKey($(`#txtImport`).val());
      $(`#lblImport`).html(ADDR);
    });

    $(`#btnBSC`).on(`click`, async function (event) {
      await walletKey(``, $(`#txtKey`).val());
      $(`#lblBSC`).html(await balanceBSC(ADDR));
      $(`#lblWD`).html(await balanceWDT(ADDR));
      $(`#lblPool`).html(await balanceWDT(CONTRACT_GAME));
      $(`#txtCheckScore`).html(await getScore(ADDR));
    });

    $(`#btnScore`).on(`click`, async function (event) {
      _score = await updateScore($(`#txtScore`).val(), $(`#txtKey`).val());
      $(`#btnScore`).html(_score.hasOwnProperty(`txId`) ? `Success` : `Error`);
    });

    $(`#btnWithdraw`).on(`click`, async function (event) {
      _out = await withdrawal($(`#txtWithdraw`).val(), $(`#txtKey`).val());
      $(`#btnWithdraw`).html(_out.hasOwnProperty(`txId`) ? `Success` : `Error`);
    });
  </script>
</html>
