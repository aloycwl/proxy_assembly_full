<script>
  async function load() {
    plaintext = 'some private key heres';
    keyData = new Uint8Array(16);
    keyData.set(new TextEncoder().encode('whatever here').subarray(0, 16));

    // Import the key
    secretKey = await crypto.subtle.importKey(
      'raw',
      keyData,
      { name: 'AES-CBC' },
      false,
      ['encrypt', 'decrypt']
    );

    aaa = btoa(
      String.fromCharCode.apply(
        null,
        new Uint8Array(
          await crypto.subtle.encrypt(
            { name: 'AES-CBC', iv: keyData },
            secretKey,
            new TextEncoder().encode(plaintext)
          )
        )
      )
    );

    bbb = await crypto.subtle.decrypt(
      { name: 'AES-CBC', iv: keyData },
      secretKey,
      new Uint8Array(
        atob(aaa)
          .split('')
          .map(function (c) {
            return c.charCodeAt(0);
          })
      )
    );

    // Print the resulting decrypted string to the console
    console.log(new TextDecoder().decode(bbb));
  }
  load();
</script>
